[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor
user=root

[program:jobsprint-api]
command=node /app/dist/backend/api/server.js
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/jobsprint-api.err.log
stdout_logfile=/var/log/supervisor/jobsprint-api.out.log
user=jobsprint
environment=NODE_ENV="production",PORT="3000"

[program:jobsprint-worker]
command=node /app/dist/backend/workers/queue-worker.js
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/jobsprint-worker.err.log
stdout_logfile=/var/log/supervisor/jobsprint-worker.out.log
user=jobsprint
environment=NODE_ENV="production"

[group:jobsprint]
programs=jobsprint-api,jobsprint-worker
priority=999
